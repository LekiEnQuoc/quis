--UI lib
local redzlib = loadstring(game:HttpGet("https://raw.githubusercontent.com/tbao143/Library-ui/refs/heads/main/Redzhubui"))()
--UI Window
local Window = redzlib:MakeWindow({
  Title = "Quis Hub",
  SubTitle = "by lekienquoc",
  SaveFolder = "Quis Hub"
})--UI Icon
Window:AddMinimizeButton({
    Button = { Image = "rbxassetid://71014873973869", BackgroundTransparency = 0 },
    Corner = { CornerRadius = UDim.new(35, 1) },
})
--UI Tab
local Tab1 = Window:MakeTab({"Um", "cherry"})
--UI Section
local Section = Tab1:AddSection({"Auto mixer"})
--local variable
local farmingmixer
local autosam

        -- Anti-AFK Logic
        local virtualUser = game:service('VirtualUser')
        game:service('Players').LocalPlayer.Idled:connect(function()
            virtualUser:CaptureController()
            virtualUser:ClickButton2(Vector2.new())
        end)        




        -- 🔹 Auto Spawn + Auto Farm Mixer Script Hoàn Chỉnh (Fix: sau khi chết vẫn uống nước)

        local Players = game:GetService("Players")
        local ReplicatedStorage = game:GetService("ReplicatedStorage")
        local player = Players.LocalPlayer
        local SpawnEvent = ReplicatedStorage:WaitForChild("Connections"):WaitForChild("Spawn")

        -- Danh sách juice
        local drinkList = {
            "Sour Juice",
            "Fruit Juice",
            "Pumpkin Juice",
            "Banana Juice",
            "Apple Juice",
            "Pear Juice",
            "Coconut Milk",
        }

        -- lấy backpack mới nhất
        local function getBackpack()
            return player:WaitForChild("Backpack")
        end

        -- 🔹 Hàm spawn
        local function spawnChar()
            print("▶ Auto Spawn...")
            SpawnEvent:FireServer(10)
        end

        -- 🔹 Hàm uống nước
        local function Uongnuoc()
            local backpack = getBackpack()
            for _, item in ipairs(backpack:GetChildren()) do
                if table.find(drinkList, item.Name) and item:IsA("Tool") then
                    item.Parent = player.Character
                    task.wait(0.01)
                    if player.Character:FindFirstChild(item.Name) then
                        print("🥤 Uống:", item.Name)
                        item:Activate()
                        task.wait(0.01)
                    end
                end
            end
        end

        -- 🔹 Hàm teleport + click
        local function TeleportAndClick(x, y, z, radius)
            local char = player.Character or player.CharacterAdded:Wait()
            local hrp = char:WaitForChild("HumanoidRootPart")

            hrp.CFrame = CFrame.new(x, y, z)
            task.wait(0.05)

            local RADIUS = radius or 10
            for _, v in pairs(workspace:GetDescendants()) do
                if v:IsA("ClickDetector") then
                    local parentPart = v.Parent
                    if parentPart and parentPart:IsA("BasePart") then
                        if not (parentPart:IsDescendantOf(workspace.Merchants.QuestFishMerchant)
                            or parentPart:IsDescendantOf(workspace.Merchants.FishMerchant)) then

                            local distance = (hrp.Position - parentPart.Position).Magnitude
                            if distance <= RADIUS then
                                fireclickdetector(v, 1)
                            end
                        end
                    end
                end
            end
        end

        -- 🔹 Danh sách điểm teleport
        local teleportPoints = {
            {-1492.856812, 216.999985, -304.369904, 7},
            {-1509.853760, 216.999985, -288.241730},
            {-1547.135376, 216.999985, -305.709229},
            {-204.250305, 224.499985, -205.790115, 6},
            {-10.922343, 215.999985, -355.356842, 6},
            {-0.771519, 215.999985, -379.533539},
            {1174.637085, 216.999985, -286.647034},
            {1179.688110, 216.999985, -280.636566, 15},
            {1987.863281, 217.999985, 562.384155},
            {-1708.811890, 215.999985, -325.484009},
            {1012.40, 217.00, 3341.04},
            {893.09, 216.00, 3391.85, 30},
            {1166.29, 216.00, 3224.77},
            {-2611.89, 253.70, 1109.05, 20},
            {986.47, 224.00, -3334.53},
            {1979.76, 217.00, 554.20},
            {1992.30, 234.00, 571.38},
            {1968.65, 218.00, 576.20},
            {-1752.73, 216.00, -215.40},
            {-1753.26, 217.22, -327.55},
        }
        -- Danh sách đảo và toạ độ
        local Islands = {
            ["Cave Island"] = Vector3.new(-194.74, 217.00, -891.58),
            ["Sand Island"] = Vector3.new(14.23, 225.00, 83.28),
            ["Sam Island"] = Vector3.new(-1285.34, 217.00, -1286.62),
            ["Bar Island"] = Vector3.new(1570.53, 254.00, 2080.40),
            ["Purple Island"] = Vector3.new(-5232.16, 390.00, -7718.27),
            ["Merlin Island"] = Vector3.new(-1669.60, 217.00, -327.11),
            ["Snow Moutain Island"] = Vector3.new(6251.43, 486.00, -1612.56),
            ["Gunslingers Island"] = Vector3.new(-1185.21, 218.00, 1433.38),
            ["Snow Island"] = Vector3.new(-1863.05, 222.00, 3229.98),
            ["Orange House Island"] = Vector3.new(731.68, 241.00, 1219.04),
            ["Rocky Island"] = Vector3.new(2042.45, 488.00, -720.06),
            ["Desert Casstle Island"] = Vector3.new(980.31, 224.00, -3249.99),
            ["Marine Island"] = Vector3.new(-3133.86, 275.80, -3653.82),
            ["Spiral Island"] = Vector3.new(-5890.76, 216.00, -8.01),
            ["Stone Island"] = Vector3.new(-2645.55, 252.56, 1018.72),
            ["Pyramid Island"] = Vector3.new(284.55, 216.00, 4954.38),
            ["Red House Island"] = Vector3.new(1053.05, 217.00, 3313.73),
            ["3 Big House Island"] = Vector3.new(1747.62, 218.00, 835.58),
            ["Moon Shaped Island"] = Vector3.new(3159.76, 217.00, 1556.41),
            ["Pursuer Island"] = Vector3.new(4848.78, 570.00, -7135.17),
            ["Vokun Island"] = Vector3.new(4671.28, 217.00, 4893.32),
            ["Small Rocky Island"] = Vector3.new(-35.31, 229.00, 2147.98),
            ["Heart Island"] = Vector3.new(2211.56, 217.00, -1960.47),
            ["Small Sand Island"] = Vector3.new(-1204.12, 224.00, 651.87),
            ["Small Palm Tree Island"] = Vector3.new(755.41, 216.00, -1370.97),
        }        

        -- Danh sách NPC và tọa độ
        local NPCs = {
            ["Better Drink Merchant"] = Vector3.new(1492.52, 260.77, 2170.93),
            ["Drink Merchant"] = Vector3.new(-1281.60, 218.20, -1367.70),
            ["Sam Merchant"] = Vector3.new(1550.16, 264.28, 2132.36),
            ["Friend Merchant"] = Vector3.new(1246.19, 224.30, -3239.48),
            ["Heavy Weapons Merchant"] = nil, -- chưa có tọa độ
            ["Krizma Seller Merchant"] = Vector3.new(-1067.90, 361.21, 1665.14),
            ["Flair Merchant"] = Vector3.new(1110.36, 217.40, 3369.08),
            ["Sword Seller Merchant"] = Vector3.new(1001.96, 225.07, -3338.09),
            ["Gun Seller Merchant"] = Vector3.new(-1843.40, 222.00, 3415.47),
            ["Merlin Merchant"] = Vector3.new(-1698.76, 216.00, -326.07),
            ["Emotes Teacher Merchant"] = Vector3.new(1520.47, 260.79, 2166.26),
            ["Affinity Merchant"] = Vector3.new(115.33, 278.00, 4949.87),
            ["CHEF Merchant"] = Vector3.new(1982.38, 218.48, 562.96),
            ["Expertise Merchant"] = Vector3.new(903.41, 270.00, 1219.53),
        }    
    -- Farm Function 
        -- 🔹 Hàm farm
        local function StartFarmMixer()
            local char = player.Character or player.CharacterAdded:Wait()
            char:WaitForChild("HumanoidRootPart")
            print("✅ Bắt đầu farm...")

            while farmingmixer and char.Parent and char:FindFirstChild("Humanoid") and char.Humanoid.Health > 0 do
                for _, point in ipairs(teleportPoints) do
                    TeleportAndClick(table.unpack(point))
                    task.wait(0.1)
                end
                Uongnuoc()
                task.wait(0.3)--speed, warning: could be banned
            end
        end

        -- 🔹 Khi chết thì spawn lại
        player.CharacterRemoving:Connect(function()
            print("⚰ Nhân vật chết, chờ spawn...")
            task.wait(3)
            spawnChar()
        end)

        -- 🔹 Khi spawn thì farm
        player.CharacterAdded:Connect(function(char)
            task.spawn(function()
                char:WaitForChild("HumanoidRootPart")
                task.wait(1)
                StartFarmMixer()
            end)
        end)

        -- 🔹 Nếu đang sống thì farm luôn
        if player.Character and player.Character:FindFirstChild("Humanoid") and player.Character.Humanoid.Health > 0 then
            task.spawn(StartFarmMixer)
        else
            spawnChar()
        end
        -- Clear texture
        -- LocalScript đặt trong StarterPlayerScripts
        for _, obj in ipairs(workspace:GetDescendants()) do
            if obj:IsA("Texture") or obj:IsA("Decal") then
               obj:Destroy()
            end
        end
        local function Autosam()
            while autosam do
                local args = {
                    "Claim1"
                }
                game:GetService("ReplicatedStorage"):WaitForChild("Connections"):WaitForChild("Claim_Sam"):FireServer(unpack(args))
                wait(1)
            end
        end
        --Other Function
            -- Clear Lag Function
                local function ClearTexture()
                    for _, v in ipairs(game:GetDescendants()) do
                        if v:IsA("ParticleEmitter") or v:IsA("Smoke") or v:IsA("Fire") or v:IsA("Sparkles")
                        or v:IsA("PostEffect") or v:IsA("BloomEffect") or v:IsA("BlurEffect") or v:IsA("SunRaysEffect") then
                            v.Enabled = false
                        elseif v:IsA("BasePart") then
                            v.CastShadow = false
                            v.Material, v.Reflectance = Enum.Material.SmoothPlastic, 0
                        elseif v:IsA("Decal") or v:IsA("Texture") then
                            v.Transparency = 1
                        elseif v:IsA("MeshPart") then
                            v.RenderFidelity = Enum.RenderFidelity.Performance
                        end
                    end

                    local lighting = game:GetService("Lighting")
                    lighting.GlobalShadows = false
                    lighting.Brightness = 2
                    lighting.FogEnd = 9e9
                    settings().Rendering.QualityLevel = 1

                    print("✅ FPS Optimizer đã chạy")
                end        
            -- tp safe place
                local function Createsafeplace()
                -- Chạy ở LocalScript (Client Side)
                local part = Instance.new("Part")
                part.Size = Vector3.new(300, 1, 300)
                part.Position = Vector3.new(30000, 10000, 30000)
                part.Anchored = true
                part.Locked = true
                part.CanCollide = true
                part.Parent = workspace
                Createsafeplace()
                end                
                local function TPSafePlace()
                    local char = player.Character or player.CharacterAdded:Wait()
                    local hrp = char:WaitForChild("HumanoidRootPart")

                    -- Đặt vị trí ngay giữa part (cao thêm 5 stud để tránh kẹt)
                    hrp.CFrame = CFrame.new(part.Position + Vector3.new(0, 1, 0))                    
                end








-- toggle để bật/tắt farm
Tab1:AddToggle({
    Name = "Auto Farm Mixer",
    Default = false,
    Callback = function(v)
        farmingmixer = v  -- cập nhật trạng thái
        if v then
            task.spawn(StartFarmMixer) -- bật farm (chạy ở thread riêng)
        end
    end
})

Tab1:AddToggle({
    Name = "Auto Sam",
    Default = false,
    Callback = function(v)
        autosam = v  -- cập nhật trạng thái
        if v then
            task.spawn(Autosam) -- bật farm (chạy ở thread riêng)
        end
    end
})





-- Lấy list tên đảo để add vào dropdown
local IslandNames = {}
for name, _ in pairs(Islands) do
    table.insert(IslandNames, name)
end

-- Tạo dropdown
local IslandDropdown = Tab1:AddDropdown({
    Name = "Islands List",
    Description = "Select the <font color='rgb(88, 101, 242)'>Island</font>",
    Options = IslandNames,
    Default = IslandNames[1],
    Flag = "IslandDropdown",
    Callback = function(selectedIsland)
        -- Teleport player đến tọa độ
        local player = game.Players.LocalPlayer
        local char = player.Character or player.CharacterAdded:Wait()
        local hrp = char:WaitForChild("HumanoidRootPart")

        local pos = Islands[selectedIsland]
        if pos then
            hrp.CFrame = CFrame.new(pos)
        end
    end
})

-- Lấy list tên NPC để đưa vào dropdown
local NPCNames = {}
for name, _ in pairs(NPCs) do
    table.insert(NPCNames, name)
end

-- Dropdown NPC
local NPCDropdown = Tab1:AddDropdown({
    Name = "NPC List",
    Description = "Select NPC",
    Options = NPCNames,
    Default = NPCNames[1],
    Flag = "NPCDropdown",
    Callback = function(Value)
        local player = game.Players.LocalPlayer
        local char = player.Character or player.CharacterAdded:Wait()
        local hrp = char:WaitForChild("HumanoidRootPart")

        local pos = NPCs[Value]
        if pos then
            hrp.CFrame = CFrame.new(pos)
        end
    end
})

Tab1:AddButton({"FPS Boost", function(Value)
    ClearTexture()
end})

Tab1:AddButton({"TP safe place", function(Value)
    TPSafePlace()
end})
